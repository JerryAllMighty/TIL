[서두]
- 기술블로그에 TIL에 적던 것들을 꼬리질문 스스로 하면서 적다보니 이것 저것 유용한게 있어서 오늘의 학습 중 유용했던 부분이라고 생각한다.

[본론]
- 2의 보수 표현 방식이 무엇인가?
두괄식으로 얘기하면, 컴퓨터에서 음수를 효율적으로 표현하고 덧셈과 뺄셈 연산을 단순화.
특정 수의 모든 비트를 반전(1의 보수)한 후 1을 더해 구한다.
양수와 음수간의 부호 변환을 가능하게하고, +0과 -0의 문제를 없애는 장점이 있어 널리 사용된다.
 > 이걸 왜 쓰지?
연산 단순화
뺄셈(A - B)을 덧셈(A + (-B))으로 처리할 수 있어, 하드웨어 구현이 더 간단해진다.
즉, 2의 보수를 덧셈한다고 생각하면 덧셈만으로 뺄셈 연산이 가능하다는 얘기.

단일 0 표현
+0과 -0이 따로 없어 시스템이 단순해집니다.
1의 보수 방식에서는 +0이 0000 0000, -0이 1111 1111처럼 0이 2가지 패턴으로 표현된다.
이 경우 이 둘을 같은 0으로 취급해야하는 추가 규칙과 회로가 필요해서 비교/연산/판단 로직이 복잡해진다.

 > 애초에 왜 +0과 -0이 생기느냐?
+0을 8비트로 쓰면: 0000 0000
이걸 1의 보수 규칙대로 “음수로” 만든다고 생각하고, 비트를 뒤집으면
1111 1111
이때 설계 상으로는
0000 0000을 “+0”, 1111 1111을 “-0”처럼 해석하게 된다.
즉, 어떤 수의 음수 = 비트 반전이고,
0도 “어떤 수”이므로 비트 반전하면 그게 0의 음수 → -0
이 규칙 때문에 자연스럽게 0이 두 개(+0과 -0) 생겨 버리는 것이다.

[부동소수점]
부동 소수점에서, 금전 계산 등은 부동 소수점으로 하지말라는 얘기를 들어본 적이 있나?
0.3짜리 double 변수 3개를 선언하고 이 3개를 단순 더해보자.
0.9가 나오지 않는다. 왜일까?

> 원인이 무엇일까?
'부동소수점'이란 소수점이 움직인다라는 것은, 고정 소수점과 반대 개념이다.
자바에서 기본적으로 제공하는 실수형 연산은 10진수가 아닌 2진수로 변환하여 다룬다.
따라서 10진수의 소수점 이하 값은 2진수로 완벽히 표현할 수 없기 때문에, 그 근사치를 사용해야만한다.
그래서 값의 차이가 생긴다.

> 대체제는 BigDecimal?
내부적으로 십진수로 숫자를 저장. 0, 1과 같은 십진수 정확히 표현 가능.
필요한만큼 많은 자릿수로 값을 저장하고 계산 가능. 무한 소수 정밀도를 가진다.
문자열로 초기화하는 방법을 통해 부동 소수점 방식의 한계를 우회한다.
기본 자료형에 비해 연산 속도가 느리다.
BigDecimal은 오브젝트이기 때문에 float이나 double 같은 기본 자료형과는 연산 방법이 다르므로, 비교 연산 등 사용 시 예상치 못한 결과를 얻을 수 있어 주의를 기울여 사용할 필요가 있다.

> 앱실론에 대해서 들어봤는가?
사전적 의미 :
'앱실론(Epsilon, ε)'은 그리스 문자이며, 수학, 과학 등 다양한 분야에서 '아주 작은 임의의 양수'를 뜻하는 기호로, 특히 극한 개념을 엄밀하게 정의하는 '엡실론-델타(ε-δ) 논법'에서 핵심적인 역할
우리는 부동소수점이 정확한 값을 나타내지 않으니 쓸 필요가 없는가? 라고 반문할 수 있다.
그렇지 않다. 여전히 사용을 하며, 이 때는 앱실론을 활용할 수도 있다.
예시를 보자.
'앱실론은 실수 계산에서 여기까지는 같은 값으로 봐도 된다'라고 잡아두는 아주 작은 기준점이라고 생각하고 활용할 수 있다. 앞서 부동소수점 등으로 계산시에 근사치를 활용한다면 정확한 값이 맞지 않는 케이스가 생길 수 있는데, 이러한 부분을 앱실론을 활용하여 기준점을 잡아주면 문제를 해소할 수 있다.
우리 프로젝트에서는 부동 소수점 다섯째짜리 이하에서 반올림한다, 이런 식으로 규약을 정할 수도 있다.
BigDecimal이 무겁고 메모리도 많이 먹어서 성능 이슈가 있을 때에는 앱실론 같은 걸로 소수점 자릿수 정의하고 쓰는 케이스도 있다.
상수 값을 하나 만드는 것이라고 생각하면 좋다.


> 코드 레벨을 벗어나서, 부동소수점은 그럼 다른 활용도는 없나? 존재 이유가 있지 않나?
LLM 모델 구성은 소수점을 활용한다.
구글 밋 등에서 쓸 수 있는 3D 그래픽 등 모두 소수점으로 계산하는거다.
과학 계산, 공학 시뮬레이션, 그래픽스, 물리 엔진, 머신러닝, 금융 계산 등 광범위한 분야에서 활용
나도 게임을 즐겨하는데, 그래픽스, 렌더링에서도 쓰이면 어느 부분에서 담당하나?
3D 게임 등에서 렌더링을 할 때 GPU를 활용하여 해당 부동소수점 계산을 진행한다.
CPU는 정수 계산만 가능해서, 부동 소수점만 전문으로 하는 GPU가 필요하다.
마침 모델 연산도 소수점으로 하는 부분이 있다보니 GPU를 사용하게 된 것.


> CPU는 뭘 하길래? 그럼 CPU와 GPU는 어떻게 다른가?
CPU는 Central Processing Unit. 강력한 연산 처리 능력.
더 적은 수의 코어를 개별 작업에 집중하여 작업을 신속하게 처리하는데 적합.
복잡한 연산을 순차적으로 처리 가능.
정수 계산만 가능. 서브 유닛 같은 부동소수점 계산용 서브 유닛이지만 성능이 별로라는 평가.

GPU는 Graphics Processing Unit.
그래픽 연산을 빠르게 처리하여 모니터에 이미지를 출력하기 위한 연산 장치.
작은 캐시와 다수의 연산 장치가 있는 것이 특징.
데이터를 병렬로 대량 처리하는데 특화되어 있음.
부동 소수점만 전문으로 계산하는 칩이라고 생각하면 편함.

[TMI]
- 하다보니 점점 꼬리 질문식으로 블로그 정리하는 요령이 생긴다. 
개념을 이해하며 정리하려다보니 다른 궁금증이 생겨서 이걸 또 의문을 가지게 되고.
이걸 다시 적는 과정을 반복하다보니 조금 변화가 느껴져 뿌듯했다.
