# FCM 푸시의 경우, IOS는 별도의 APNs가 필수이다.

오늘 잘되고 있던 점주쪽의 IOS 사용자만 푸시가 계속 날아가지 않아 곤욕을 치뤘다. 
푸시 결과가 쌓이는 테이블부터 시작하여 로그를 모두 뒤지기 시작하였고, 계속 살펴보다보니 FCM 푸시 전송 결과가 unauthenticated 인 것을 발견하였다.
단서는 찾았는데, 이게 어디서부터 어떻게 잘못되어있는 것인지 처음엔 파악이 안되어, 명령어로 바로 FCM에 결과만 호출해보는 것도 시도해보고, 
구글링하다 구글 oauth2 인증 과정에서 만료된 토큰을 새로 갱신하지 못한다면 그렇다는 글을 보고 java단의 fcm 유틸 관련 이니셜라이저도 뜯어보고, 온갖 쇼를 했다.
해결은 파이어베이스 콘솔에서 실마리를 발견하였다. 알고보니 사용자단의 IOS는 따로 APNs를 설정해주었는데, 점주쪽은 따로 해주지 않은 것. 
그래서 앱 개발자분과 소통해보니, 기존에 모두 설정되어있던 부분들을 새로 모두 지우고 다시 진행하시는 과정에서 해당 부분 이슈가 난 것.
앱 재배포 할 필요도 없고 그냥 해당 APNs만 새로 추가해주니 다시 푸시가 잘 가는 것을 확인하였다. 

[결론]
- IOS는 APNs가 필수이다. 만약 fcm의 푸시 전송 결과값의 에러 코드가 unauthenticated다 ? 그럼 FCM 콘솔부터 들어가서 필요한 인증이나 허가가 사전에 먼저 셋팅이 되어 있는지 확인한다. 
안드로이드는 사전의 허가가 없어도 따로 되는 것으로 알고 있는데, IOS는 따로 필요하더라.
